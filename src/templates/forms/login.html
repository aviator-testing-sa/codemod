{% extends "base.html" %}
{% import "forms/base.html" as base %}
{% block content %}
<div class="page-title">
  <div class="row">
    <div class="col-sx-12 text-center">
      <h1>Login & Register</h1>
    </div>
  </div>
</div>
<div class="content boxs">
    <div class="row">
        <div class="col-md-12 col-sm-12">
            <div class="page-content">
                <div class="row">
                    <div class="col-md-4 col-sm-6">
                        <div class="widget">
                            <div class="widget-title">
                                <h4>Login Account</h4>
                            </div><!-- end widget-title -->

                            <div class="login-form">
                                <form method="post" action="/login" role="login">
                                    {{ form.csrf_token }}
                                    <div class="form-group">
                                        {{ form.name.label }}
                                        {{ form.name(class="form-control") }}
                                    </div>
                                    <div class="form-group">
                                        {{ form.password.label }}
                                        {{ form.password(class="form-control") }}
                                    </div>
                                    <div class="text-center">
                                        <button type="submit" name="go" class="btn btn-primary">Login</button>
                                        <button id="forgotBtn" type="button" class="btn col-md-offset-1" onclick="forgotStuff()">Forgot?</button>
                                    </div>
                                    <div class="form-group">
                                        {{ error }}
                                    </div>
                                </form>
                            </div><!-- end login-form -->
                        </div><!-- end widget -->
                    </div><!-- end col -->

                    <div class="col-md-8 col-sm-6">
                        <div class="widget">
                            <div class="widget-title">
                                <h4>Don't Have an Account? Register Today!</h4>
                            </div><!-- end widget-title -->

                            <div class="login-form register-form">
                                <form method="post" action="/register" role="register" class="row">
                                    {{ signup_form.csrf_token }}
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label>Username</label>
                                            <input type="text" name="slug" required class="form-control" placeholder="" />
                                            <span class="fa fa-user"></span>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label>Email Address</label>
                                            <input type="email" name="email" required class="form-control" placeholder="" />
                                            <span class="fa fa-envelope"></span>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label>Password</label>
                                            <input type="password" name="password" required class="form-control" placeholder="" />
                                            <span class="fa fa-lock"></span>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label>Confirm Password</label>
                                            <input type="password" name="confirm" required class="form-control" placeholder="" />
                                            <span class="fa fa-lock"></span>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            {% for subfield in signup_form.type %}
                                                <div class="radio-inline">
                                                    {{ subfield(class="form-check-input") }}
                                                    {{ subfield.label(class="form-check-label") }}
                                                </div>
                                            {% endfor %}
                                        </div>
                                    </div>
                                    <div class="col-md-12">
                                    <button type="submit" name="go" class="btn btn-primary">Register Now</button>
                                    </div>
                                </form>
                            </div><!-- end login-form -->
                        </div><!-- end widget -->
                    </div><!-- end col -->
                </div><!-- end row -->
            </div>
        </div><!-- end col -->
    </div><!-- end row -->
</div><!-- end content -->

<br>

<div class="content-message boxs">
    <div class="row">
        <div class="col-md-10 col-md-offset-1 text-center">
            <h2>See why over 10,000 designers and developers trust Catalog. Ready to take your marketplace to the next level?</h2>
            <a href="#" class="btn btn-default btn-lg">Join Today</a>
        </div>
    </div><!-- end row -->
</div><!-- end content message -->

<div id="forgotModal" class="modal">
    <div class="modal-content modal-dialog login-form">
        <form method="post" action="/auth/reset/send" role="reset">
            <div class="form-group">
                <p>Please enter your email address and we'll send you the reset link</p>
                <input type="email" name="email" required class="form-control" placeholder="" />
                <div class="text-center">
                    <br/>
                    <button type="submit" name="reset" class="btn btn-primary">Reset</button>
                    <button type="button" class="btn col-md-offset-1" onclick="forgotStuff(false)">Cancel</button>
                </div>
            </div>
    </div>
</div>

<script>

var forgotModal = document.getElementById('forgotModal');

function forgotStuff(open=true) {
    if (open) {
        forgotModal.style.display = "block";
    } else {
        forgotModal.style.display = "none";
    }
}

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
    if (event.target == forgotModal) {
        forgotStuff(false);
    }
}

</script>

{% endblock content %}
